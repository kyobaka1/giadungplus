*** MÔ TẢ app products - quản lý sản phẩm  ***
/products sẽ làm việc với Sapo, Sapo MP, Shopee KNB về các thông tin của sản phẩm như thông tin, tên sản phẩm, các phân loại sản phẩm, sku, nhà cung cấp, nhập hàng, quản lý tồn kho, kiểm tra xuất nhập, giá vốn.....

Thông tin khách hàng vẫn sẽ được lưu trên Sapo. Còn app chỉ bổ trợ việc giao tiếp với Sapo để bổ sung thông tin, hoặc cung cấp các ứng dụng tools hỗ trợ cần thiết.

Sản phẩm là core của việc bán hàng, cực kì quan trọng với công ty bán lẻ sàn thương mại điện tử như Gia Dụng Plus, nên phần này cần xây dựng kĩ càng, nhiều tính năng hỗ trợ và độ chính xác, mở rộng cao.

*** Cấu trúc ***
- Sản phẩm = products => Lưu trữ các sản phẩm, phân loại sản phẩm, nhãn hiệu = nhà cung cấp hiện tại.
- Phân loại sản phẩm = variants => Lưu trữ sku, tên phân loại, barcode phân loại, cân nặng, tên phân loại, giá bán - mở rộng thêm: tên phân loại trung quốc, giá nhập, kích thước thùng, số lượng đóng gói / thùn, kích thước đóng gói / chiếc, khối lượng của đơn chiếc (chưa hộp), khối lượng đơn chiếc (có hộp).....

*** Các chức năng chính và phân nhánh phụ của /products  ***

- Quản trị Xuất/nhập:
    + Sản phẩm: Quản trị các thông tin của sản phẩm thêm bên ngoài Sapo (giá nhập bên trung quốc, kích thước thùng, kích thước hộp, tên model nhập khẩu )
    + Model sản phẩm khi nhập khẩu: Quản trị lưu trữ các thông tin xuất nhập khẩu theo model như hscode, tên tiếng anh, tên tiếng việt, nhà sản xuất, thuế... để làm thủ tục hải quan.
    + Update giá vốn: Mỗi lần nhập hàng về sẽ cập nhật giá vốn phân bổ lên để lưu trữ và tính toán giá vốn để hoạch toán lãi lỗ.
    + 

- Nhập hàng:
    + Gợi ý nhập hàng theo nhà cung cấp, theo sản phẩm, cảnh báo nhập hàng.
    + Đơn nhập hàng: Hỗ trợ lên đơn hàng, tính toán CPM để dự toán phù hợp, gửi đơn cho nhà cung cấp, label nhập khẩu...

- Phân tích bán hàng:
    + Quản trị giá vốn, lời lãi theo sản phẩm.
    + Tỉ lệ Đánh giá tốt/xấu theo từng phân loại

....sẽ mở rộng thêm trong tương lai.

*** API Sapo Products ***
- Các API của Sapo customers -> tham khảo ở /thamkhao/API_THAMKHAO.xlsx
- JSON product có cấu trúc như sau:
    {"product":{"id":42672265,"tenant_id":236571,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-09-12T10:06:27Z","status":"active","brand_id":1142582,"brand":"YULIANG","description":"","image_path":null,"image_name":null,"name":"Kệ chén/ bát dán tường","opt1":"Kích thước","opt2":null,"opt3":null,"category_id":3050391,"category":"Kệ sắt, nhôm","category_code":"06KIMLOAI","tags":"stop_import","medicine":false,"product_type":"normal","variants":[{"id":62457516,"tenant_id":236571,"location_id":241737,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-09-12T10:06:27Z","category_id":3050391,"brand_id":1142582,"product_id":42672265,"composite":false,"init_price":0.000,"init_stock":0.000,"variant_retail_price":180000.0000,"variant_whole_price":126000.0000,"variant_import_price":0.0000,"cost_price":null,"image_id":21298499,"description":null,"name":"Kệ chén/ bát dán tường - Kệ chén / Đen","opt1":"Kệ chén / Đen","opt2":null,"opt3":null,"product_name":"Kệ chén/ bát dán tường","product_status":null,"status":"active","sellable":true,"sku":"TG-0201-DEN","barcode":"02011","taxable":false,"weight_value":900.000,"weight_unit":"g","unit":"cái","packsize":false,"packsize_quantity":null,"packsize_root_id":null,"packsize_root_sku":null,"packsize_root_name":null,"tax_included":false,"input_vat_id":705911,"output_vat_id":705911,"input_vat_rate":0.000,"output_vat_rate":0.000,"product_type":"normal","variant_prices":[{"id":188231778,"value":0.0000,"included_tax_price":0.0000,"name":"Giá nhập","price_list_id":717398,"price_list":{"id":717398,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"GIANHAP","currency_id":236570,"name":"Giá nhập","is_cost":true,"currency_symbol":"đ","currency_iso":"VND","status":"default","init":true}},{"id":188231779,"value":126000.0000,"included_tax_price":126000.0000,"name":"Giá MIN","price_list_id":717397,"price_list":{"id":717397,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"BANBUON","currency_id":236570,"name":"Giá MIN","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"active","init":true}},{"id":188231780,"value":180000.0000,"included_tax_price":180000.0000,"name":"Giá bán lẻ","price_list_id":717399,"price_list":{"id":717399,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"BANLE","currency_id":236570,"name":"Giá bán lẻ","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"default","init":true}},{"id":854146425,"value":0.0000,"included_tax_price":0.0000,"name":"Giá niêm yết","price_list_id":2361334,"price_list":{"id":2361334,"tenant_id":236571,"created_on":"2025-07-30T08:01:48Z","modified_on":"2025-07-30T08:01:48Z","code":"NIEMYET","currency_id":236570,"name":"Giá niêm yết","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"active","init":false}}],"inventories":[{"location_id":241737,"variant_id":62457516,"mac":82800.0000,"amount":0,"on_hand":0.0000,"available":0.0000,"committed":0.0000,"incoming":0.0000,"onway":0.0000,"min_value":10.0000,"max_value":38.0000,"bin_location":"C21/Tầng 1/D","wait_to_pack":0.0000,"modified_on":null},{"location_id":548744,"variant_id":62457516,"mac":82800.0000,"amount":0,"on_hand":0.0000,"available":0.0000,"committed":0.0000,"incoming":1.0000,"onway":0.0000,"min_value":0.0000,"max_value":0.0000,"bin_location":null,"wait_to_pack":0.0000,"modified_on":null}],"images":[{"id":21298499,"size":80457.0,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","file_name":"c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","is_default":true,"position":8}],"composite_items":null,"warranty":false,"warranty_term_id":null,"expiration_alert_time":null},{"id":62457517,"tenant_id":236571,"location_id":241737,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-09-12T10:06:27Z","category_id":3050391,"brand_id":1142582,"product_id":42672265,"composite":false,"init_price":0.000,"init_stock":0.000,"variant_retail_price":230000.0000,"variant_whole_price":170000.0000,"variant_import_price":0.0000,"cost_price":null,"image_id":21298500,"description":null,"name":"Kệ chén/ bát dán tường - Kệ chén / NB","opt1":"Kệ chén / NB","opt2":null,"opt3":null,"product_name":"Kệ chén/ bát dán tường","product_status":null,"status":"active","sellable":true,"sku":"TG-0201-NB","barcode":"02012","taxable":true,"weight_value":1200.000,"weight_unit":"g","unit":"cái","packsize":false,"packsize_quantity":null,"packsize_root_id":null,"packsize_root_sku":null,"packsize_root_name":null,"tax_included":false,"input_vat_id":705911,"output_vat_id":705911,"input_vat_rate":0.000,"output_vat_rate":0.000,"product_type":"normal","variant_prices":[{"id":188231781,"value":0.0000,"included_tax_price":0.0000,"name":"Giá nhập","price_list_id":717398,"price_list":{"id":717398,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"GIANHAP","currency_id":236570,"name":"Giá nhập","is_cost":true,"currency_symbol":"đ","currency_iso":"VND","status":"default","init":true}},{"id":188231782,"value":170000.0000,"included_tax_price":170000.0000,"name":"Giá MIN","price_list_id":717397,"price_list":{"id":717397,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"BANBUON","currency_id":236570,"name":"Giá MIN","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"active","init":true}},{"id":188231783,"value":230000.0000,"included_tax_price":230000.0000,"name":"Giá bán lẻ","price_list_id":717399,"price_list":{"id":717399,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"BANLE","currency_id":236570,"name":"Giá bán lẻ","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"default","init":true}},{"id":854146426,"value":0.0000,"included_tax_price":0.0000,"name":"Giá niêm yết","price_list_id":2361334,"price_list":{"id":2361334,"tenant_id":236571,"created_on":"2025-07-30T08:01:48Z","modified_on":"2025-07-30T08:01:48Z","code":"NIEMYET","currency_id":236570,"name":"Giá niêm yết","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"active","init":false}}],"inventories":[{"location_id":241737,"variant_id":62457517,"mac":115200.0000,"amount":0,"on_hand":1.0000,"available":1.0000,"committed":0.0000,"incoming":0.0000,"onway":0.0000,"min_value":10.0000,"max_value":38.0000,"bin_location":"C21/Tầng 1/D","wait_to_pack":0.0000,"modified_on":null},{"location_id":548744,"variant_id":62457517,"mac":115200.0000,"amount":0,"on_hand":0.0000,"available":0.0000,"committed":0.0000,"incoming":0.0000,"onway":0.0000,"min_value":0.0000,"max_value":0.0000,"bin_location":null,"wait_to_pack":0.0000,"modified_on":null}],"images":[{"id":21298500,"size":117513.0,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/afe5855d-1d39-41f4-bdb2-9e15be3e2104.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/afe5855d-1d39-41f4-bdb2-9e15be3e2104.jpg","file_name":"afe5855d-1d39-41f4-bdb2-9e15be3e2104.jpg","is_default":true,"position":9}],"composite_items":null,"warranty":false,"warranty_term_id":null,"expiration_alert_time":null}],"options":[{"id":41777653,"name":"Kích thước","position":1,"values":["Kệ chén / Đen","Kệ chén / NB"]}],"images":[{"id":140932312,"size":202328.0,"created_on":"2025-07-15T08:27:45Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-9-1752568065248.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-9-1752568065248.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-9-1752568065248.jpg","position":1},{"id":140932297,"size":274320.0,"created_on":"2025-07-15T08:27:21Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-1-1752568041126.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-1-1752568041126.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-1-1752568041126.jpg","position":2},{"id":140932298,"size":146512.0,"created_on":"2025-07-15T08:27:22Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-3-1752568041781.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-3-1752568041781.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-3-1752568041781.jpg","position":3},{"id":140932299,"size":207725.0,"created_on":"2025-07-15T08:27:22Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-4-1752568042438.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-4-1752568042438.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-4-1752568042438.jpg","position":4},{"id":140932300,"size":195662.0,"created_on":"2025-07-15T08:27:23Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-5-1752568043062.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-5-1752568043062.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-5-1752568043062.jpg","position":5},{"id":140932301,"size":196543.0,"created_on":"2025-07-15T08:27:24Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-6-1752568043762.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-6-1752568043762.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-6-1752568043762.jpg","position":6},{"id":140932302,"size":193860.0,"created_on":"2025-07-15T08:27:24Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-7-1752568044308.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-7-1752568044308.jpg","file_name":"ke-up-chen-dia-inox-nguyen-ban-dan-tuong-chac-chan-ko-can-khoan-tuong-7-1752568044308.jpg","position":7},{"id":21298499,"size":80457.0,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","file_name":"c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","position":8},{"id":21298500,"size":117513.0,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/afe5855d-1d39-41f4-bdb2-9e15be3e2104.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/afe5855d-1d39-41f4-bdb2-9e15be3e2104.jpg","file_name":"afe5855d-1d39-41f4-bdb2-9e15be3e2104.jpg","position":9}],"product_medicines":null}}
- JSON của variant có cấu trúc như sau:
    {"variant":{"id":62457516,"tenant_id":236571,"location_id":241737,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-09-12T10:06:27Z","category_id":3050391,"brand_id":1142582,"product_id":42672265,"composite":false,"init_price":0.000,"init_stock":0.000,"variant_retail_price":180000.0000,"variant_whole_price":126000.0000,"variant_import_price":0.0000,"cost_price":null,"image_id":21298499,"description":null,"name":"Kệ chén/ bát dán tường - Kệ chén / Đen","opt1":"Kệ chén / Đen","opt2":null,"opt3":null,"product_name":"Kệ chén/ bát dán tường","product_status":null,"status":"active","sellable":true,"sku":"TG-0201-DEN","barcode":"02011","taxable":false,"weight_value":900.000,"weight_unit":"g","unit":"cái","packsize":false,"packsize_quantity":null,"packsize_root_id":null,"packsize_root_sku":null,"packsize_root_name":null,"tax_included":false,"input_vat_id":705911,"output_vat_id":705911,"input_vat_rate":0.000,"output_vat_rate":0.000,"product_type":"normal","variant_prices":[{"id":188231778,"value":0.0000,"included_tax_price":0.0000,"name":"Giá nhập","price_list_id":717398,"price_list":{"id":717398,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"GIANHAP","currency_id":236570,"name":"Giá nhập","is_cost":true,"currency_symbol":"đ","currency_iso":"VND","status":"default","init":true}},{"id":188231779,"value":126000.0000,"included_tax_price":126000.0000,"name":"Giá MIN","price_list_id":717397,"price_list":{"id":717397,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"BANBUON","currency_id":236570,"name":"Giá MIN","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"active","init":true}},{"id":188231780,"value":180000.0000,"included_tax_price":180000.0000,"name":"Giá bán lẻ","price_list_id":717399,"price_list":{"id":717399,"tenant_id":236571,"created_on":"2020-03-03T02:35:41Z","modified_on":"2020-03-03T02:35:41Z","code":"BANLE","currency_id":236570,"name":"Giá bán lẻ","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"default","init":true}},{"id":854146425,"value":0.0000,"included_tax_price":0.0000,"name":"Giá niêm yết","price_list_id":2361334,"price_list":{"id":2361334,"tenant_id":236571,"created_on":"2025-07-30T08:01:48Z","modified_on":"2025-07-30T08:01:48Z","code":"NIEMYET","currency_id":236570,"name":"Giá niêm yết","is_cost":false,"currency_symbol":"đ","currency_iso":"VND","status":"active","init":false}}],"inventories":[{"location_id":241737,"variant_id":62457516,"mac":82800.0000,"amount":0,"on_hand":0.0000,"available":0.0000,"committed":0.0000,"incoming":0.0000,"onway":0.0000,"min_value":10.0000,"max_value":38.0000,"bin_location":"C21/Tầng 1/D","wait_to_pack":0.0000,"modified_on":null},{"location_id":548744,"variant_id":62457516,"mac":82800.0000,"amount":0,"on_hand":0.0000,"available":0.0000,"committed":0.0000,"incoming":1.0000,"onway":0.0000,"min_value":0.0000,"max_value":0.0000,"bin_location":null,"wait_to_pack":0.0000,"modified_on":null}],"images":[{"id":21298499,"size":80457.0,"created_on":"2021-02-26T03:58:21Z","modified_on":"2025-07-15T08:27:49Z","path":"100/236/571/variants/c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","full_path":"https://sapo.dktcdn.net/100/236/571/variants/c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","file_name":"c01ede79-4fd8-4fbc-b88b-ee7fbd9e3b69.jpg","is_default":true,"position":8}],"composite_items":null,"warranty":false,"warranty_term_id":null,"expiration_alert_time":null}}

*** YÊU CẦU XÂY DỰNG CÔNG CỤ /customer ***

Xây cấu trúc giao tiếp với các API để có thể can thiệp tự động bằng công cụ với 1 số chức năng chính sau:

- Vì muốn lưu dữ liệu tập trung nhưng Sapo hiện không có các trường lưu thông tin -> Nên tôi sẽ lấy products.descreption làm nơi lưu trữ các thông tin như là DATABASE custom. 
    + Dùng JSON, nhưng bọc trong vùng marker riêng ([GDP_META]...[/GDP_META] -> Bên trong là JSON -> Lưu vào descreption.
    + Lưu toàn bộ thông tin tất cả variants trong 1 products.
    + Thông tin của products.
    + Cấu trúc JSON như sau: [GDP_META] {"products": {"variants": [{"id": 1, "name": "Variant 1..."}, {"id": 2, "name": "Variant 2..."}]}} [/GDP_META]
    + Khi lấy thông tin của variants -> nếu trống -> hãy khởi tạo nó = 0 và null tuỳ trường thông tin.
    + Nếu products đã có descreption # null -> lưu đoạn JSON vào cuối cùng.
    + Hãy viết hàm để có thể thay đổi bất kì thông tin nào của JSON bằng cách gửi full json đã thay đổi vào đó -> để update.
    + Các thông tin tạm thời lưu như sau:
        - Thông tin của products:
            + web_product_id: ID sản phẩm trên web size.
            + descreption: mô tả của sản phẩm.
        - Thông tin của variants:
            + Thông tin nhập hàng: giá trung quốc (nhân dân tệ), sku của nsx, thông tin thùng (full thùng bao nhiêu cái, dài x rộng x cao), thông tin bao bì (dài x rộng x cao, trọng lượng cả bì, trọng lượng ko bao bì, trọng lượng qui đổi).
            + Thông tin nhập khẩu: SKU-MODEL nhập khẩu -> Từ đây sẽ có toàn bộ thông tin về sản phẩm nhập khẩu.
            + Thông tin web: web_variant_id: ID variant trên website (list -> vì có thể đăng trên nhiều link)


- Xây dựng giống /orders -> có DTO Product và Variant trong product, các services để giao tiếp để lấy thông tin từ json vào DTO và ngược lại.
- Xây dựng các method để có thể thay đổi thông tin của products, variants thông qua DTO.

*** QUI ĐỊNH ***
- Sử dụng /core để giao tiếp với Sapo và tham khảo /orders để xây dựng các chức năng.
- Nếu muốn lấy thêm thông tin gì URL API hoặc method, hãy hỏi tôi thay vì tự suy diễn ra API.
