<html lang="vi-VN"><head>
    <script type="text/javascript" async="" src="//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js"></script><script>
        var S_LANG = 'vi-VN';
        var S_LANG_RES = 'https://sapo.dktcdn.net/sapo-frontend-x/d9e1ce1.i18n_vi-VN.json';
    </script>
    <script src="https://sapo.dktcdn.net/fe-cdn-production/dist/printform.bundle.js"></script>
    <link rel="shortcut icon" href="/static/logo.png"/>
    <meta name="msapplication-tap-highlight" content="no">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link href="/static/all.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/icon-7/pe-icon-7-stroke/css/pe-icon-7-stroke.css">
    <style type="text/css">
        .line-100-1px{width: 100%; height: 1px; background-color: #000; display: block}
        .line-100-2px{width: 100%; height: 2px; background-color: #000; display: block}
        .line-100-3px{width: 100%; height: 3px; background-color: #000; display: block}
        .line-100-4px{width: 100%; height: 4px; background-color: #000; display: block}
        .line-50-1px{width: 50%; height: 1px; background-color: #000; display: block}
        .line-50-2px{width: 50%; height: 2px; background-color: #000; display: block}
        .line-50-3px{width: 50%; height: 3px; background-color: #000; display: block}
        .line-50-4px{width: 50%; height: 4px; background-color: #000; display: block}
        
        #same-size-text{height: 2px; background-color: #333}
        @font-face {
          font-family: 'Averta Std CY';
          src: url("/static/font/AvertaStdCY-Bold.woff2") format('woff2'),
               url("/static/font/AvertaStdCY-Bold.woff") format('woff');
          font-weight: bold;
          font-style: normal;
        }
        .print_div {
              font-family: 'Averta Std CY', sans-serif;
            }

            .line1-name {
  position: relative;
  display: inline-block;
}

.line1-name .border-overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 4px;
  background-color: #333;
}




    </style>
</head>
<body>
<div>
{% if size == 'nhanphu' %}     
<div id="containerPrint">
<style type="text/css">
body{display: block;margin: 0;color: #000}
.print_div {font-size: 7px;font-family: sans-serif;}
p{margin: 0;line-height: 10px;font-size: 7px;line-height: 8px}
h5{font-size: 9px;margin: 0;}
h2,h3,h4{margin: 0;}
*, *:before, *:after { -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}}}
p {margin: 0}img {margin: 0}#example_filter{display: none;}#example_info{display: none;}
</style>

{%for vari in vari_list %}
<div class="print_div" id="print-div-se" style="width: 52mm; height: 32mm;border:1px solid #ccc;position: relative;padding: 2px; break-after: page; margin: auto;z-index: 9; overflow: hidden;">
    <div style="padding: 4px;float:right;width: 52mm; height: 32mm;display: flex;flex-wrap: wrap;">
        <div style="display: flex;flex-wrap:wrap;width:100%;padding-bottom: 2px; margin-bottom: 2px;">
            <div style=" width: 100%; text-align: center; border-bottom: 2px solid #000; border-top: 2px solid #000; margin: 0; padding: 0;height:40px; margin-top: 3px">
                <img src="/static/barcode-product/{{vari.sku}}.png" style="height: 100%; width: 85%;"  /> 
            </div>
            <div style=" width: 95%; text-align: center;">
                <p style="font-size:25px;line-height: 26px; margin-bottom: 4px;"><b>{{vari.sku}}</b></p>
                <p style="line-height: 17px; font-size: 16px; margin-top: 6px">【{{vari.opt1}}】</p>
            </div>
        </div>

        </div>
    </div>
</div>
{%endfor%}

</div>
</div>
{%endif%}

{% if size == '2hang' %}     
<div id="containerPrint">
<style type="text/css">
body{display: block;margin: 0;color: #000}
.print_div {font-size: 7px;font-family: sans-serif;}
p{margin: 0;line-height: 10px;font-size: 7px;line-height: 8px}
h5{font-size: 9px;margin: 0;}
h2,h3,h4{margin: 0;}
*, *:before, *:after { -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}}}
p {margin: 0}img {margin: 0}#example_filter{display: none;}#example_info{display: none;}
</style>

{%for vari in vari_list %}
<div class="print_div" id="print-div-se" style="width: 70mm; height: 22mm;border:1px solid #ccc;position: relative;padding: 2px; break-after: page; margin: auto;z-index: 9; overflow: hidden; display: flex">
    <div style="padding: 4px;float:right;width: 35mm; height: 22mm;display: flex;flex-wrap: wrap;">
        <div style="display: flex;flex-wrap:wrap;width:100%;padding-bottom: 1px; margin-bottom: 1px;">
            <div style=" width: 100%; text-align: center; border-bottom: 1px solid #000; border-top: 1px solid #000; margin: 0; padding: 0;height:23px; margin-top: 1px">
                <img src="/static/barcode-product/{{vari.sku}}.png" style="height: 100%; width: 85%;"  /> 
            </div>
            <div style=" width: 95%; text-align: center;">
                <p style="font-size:17px;line-height: 17px; margin-bottom: 2px;"><b>{{vari.sku}}</b></p>
                <p style="line-height: 12px; font-size: 12px; margin-top: 2px">【{{vari.opt1}}】</p>
            </div>
        </div>

        </div>
    <div style="padding: 4px;float:right;width: 35mm; height: 22mm;display: flex;flex-wrap: wrap;">
        <div style="display: flex;flex-wrap:wrap;width:100%;padding-bottom: 1px; margin-bottom: 1px;">
            <div style=" width: 100%; text-align: center; border-bottom: 1px solid #000; border-top: 1px solid #000; margin: 0; padding: 0;height:23px; margin-top: 1px">
                <img src="/static/barcode-product/{{vari.sku}}.png" style="height: 100%; width: 85%;"  /> 
            </div>
            <div style=" width: 95%; text-align: center;">
                <p style="font-size:17px;line-height: 17px; margin-bottom: 2px;"><b>{{vari.sku}}</b></p>
                <p style="line-height: 12px; font-size: 12px; margin-top: 2px">【{{vari.opt1}}】</p>
            </div>
        </div>

        </div>
    </div>
</div>
{%endfor%}

</div>
</div>
{%endif%}
{% if size == 'a7' %}     
<div id="containerPrint">
<style type="text/css">
body{display: block;margin: 0;color: #000}
.print_div {font-size: 7px;;}
p{margin: 0;font-size: 14px;}
h5{font-size: 9px;margin: 0;}
h2,h3,h4{margin: 0;}
*, *:before, *:after { -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}}}
p {margin: 0}img {margin: 0}#example_filter{display: none;}#example_info{display: none;}
</style>

{%for vari in vari_list %}
<div class="print_div" id="print-div-se" style="width: 74mm; height: 105mm;border:1px solid #ccc;position: relative;padding: 2px; break-after: page; margin: auto;z-index: 9; overflow: hidden;">
    <div style="float:right;width: 74mm; height: 105mm;display: flex;flex-wrap: wrap;padding: 12px;">
            {%if vari.brand == "phaledo"%}
                <div style=" width: 100%;display: flex; height: 35px;">
                  <img src="/static/logo-phaledo.jpg" style="height: 35px;margin-bottom: 2px" /> 
                  <div style="font-size: 10px; width: 70%; text-align: right; height: 35px; font-family: inherit; display: flex">
                    <div style="margin: auto 0 0 auto" class="bold">
                          PHALEDO OFFICIAL <br>
                          www.phaledo.vn
                      </div>
                  </div>
                </div>
                {%elif vari.brand == "lteng"%}
                <div style=" width: 100%;display: flex; height: 35px;">
                  <img src="/static/logo-lteng.jpg" style="height: 35px;margin-bottom: 2px" /> 
                  <div style="font-size: 10px; width: 70%; text-align: right; height: 35px; font-family: inherit; display: flex">
                    <div style="margin: auto 0 0 auto" class="bold">
                          LTENG Blue Vine <br>
                          www.lteng.vn
                      </div>
                  </div>
                </div>
                {%else%}
                <div style=" width: 100%;display: flex; height: 35px;">
                  <img src="/static/giaodiensang.png" style="height:35px;margin-bottom: 2px" /> 
                  <div style="font-size: 10px; width: 70%; text-align: right; height: 35px; font-family: inherit; display: flex">
                    <div style="margin: auto 0 0 auto" class="bold">
                          GIA DỤNG PLUS + <br>
                          www.giadungplus.com
                      </div>
                  </div>
                </div>
        {%endif%}
       
            <div style="height: 40%; display: flex; flex-wrap: wrap; flex-direction: row; margin-top: 5px;">
                <p class="line1-name" style="margin-bottom: 2px;text-transform: uppercase;">{{vari.vi_name}}</p>
                <p class="line1-name" id="text-size" style="margin-bottom: 2px; color: #555;">{{vari.en_name}}</p>
               
                <div style=" width: 100%; text-align: left;">
                    <p style="font-size:10px;line-height: 12px; margin-bottom: 2px;">{{vari.descreption}}</p>
                </div>
                <div style=" width: 100%; text-align: left;">
                    <p style="font-size:10px;line-height: 12px; margin-bottom: 2px;">Chất liệu: {{vari.material}}</p>
                </div>
                <div id="same-size-text"></div>
            </div>
            <div style="height: 24%; display: flex; flex-wrap: wrap; flex-direction: row;">
                <p style="font-size:9px;">- Nhập khẩu bởi: Công ty cổ phần TMDV <b>Gia Dụng Plus</b> -MST: 0109514772 - Địa chỉ: C21-02 KĐT Geleximco, P. Hà Đông, Hà Nội</p>
                <p style="font-size:9px";>- NSX: {{vari.nsx_name}} - {{vari.nsx_diachi}} - HDSD: Xem chi tiết tài liệu gửi kèm.</p>
                <p style="font-size:10px;font-weight: inherit; margin-top: 3px; margin-bottom: 4px"><i>SẢN XUẤT TẠI TRUNG QUỐC</i></p>

                <div class="line-100-4px"></div>
            </div>
            <div style="height: 30%; width: 100%; display: flex; flex-direction: row;">
                <div style="width: 75%; margin:auto">
                    <p style="font-size:32px;line-height: 35px; margin-bottom: 2px;"><b>{{vari.skugon}}</b></p>
                    <p style="font-size:18px;line-height: 22px; margin-bottom: 2px;">{{vari.opt1}}</p>
                    <!--
                    <p style="font-size:11px;line-height: 14px;text-align: left;color: #555">₫ 200.000</p>
                   -->
                </div>
                <div style="width: 25%; padding-top: 20px; margin-right: 5px;">
                    <div style="transform: rotate(-90deg); display: inline-block; height: 70px;">
                      <svg id="barcode-{{vari.barcode}}"></svg>
                    </div>
                </div>

            </div>

        </div>
        
    </div>
</div>




<script>
function adjustFontToFitOneLine(el, minFontSize = 12) {
  // Dùng max width của phần tử cha (nếu có) hoặc chính el
  const maxWidth = el.parentElement?.offsetWidth || el.offsetWidth;

  // Clone để đo
  const clone = el.cloneNode(true);
  clone.style.visibility = 'hidden';
  clone.style.position = 'absolute';
  clone.style.whiteSpace = 'nowrap';
  clone.style.left = '-9999px';
  document.body.appendChild(clone);

  let fontSize = 40; // bắt đầu từ cỡ to
  let lineHeight = fontSize + 3;

  // Thử giảm dần tới khi vừa vặn
  while (fontSize > minFontSize) {
    clone.style.fontSize = fontSize + 'px';
    if (clone.scrollWidth <= maxWidth) break;
    fontSize -= 1;
  }
  fontSize = fontSize - 2;
  lineHeight = fontSize + 2;
  // Áp dụng lại
  el.style.fontSize = fontSize + 'px';
  el.style.lineHeight = lineHeight + 'px';

  document.body.removeChild(clone);
}

document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll('.line1-name').forEach(adjustFontToFitOneLine);

  const refText = document.getElementById("text-size");
  const refText2 = document.getElementById("same-size-text");

  if (!refText) return;

  const words = refText.textContent.trim().split(/\s+/);
  const wordCount = words.length;

  let displayWords = [];

  if (wordCount >= 4) {
    displayWords = words.slice(0, 3); // Lấy 3 từ đầu
  } else if (wordCount === 3) {
    displayWords = words.slice(0, 2); // Lấy 2 từ đầu
  } else {
    displayWords = words; // Lấy full
  }

  // Tạo span để đo chiều rộng
  const measuringSpan = document.createElement("span");
  measuringSpan.style.visibility = "hidden";
  measuringSpan.style.whiteSpace = "nowrap";

  const computedStyle = window.getComputedStyle(refText);
  measuringSpan.style.fontSize = computedStyle.fontSize;
  measuringSpan.style.fontFamily = computedStyle.fontFamily;
  measuringSpan.style.fontWeight = computedStyle.fontWeight;
  measuringSpan.style.letterSpacing = computedStyle.letterSpacing;
  measuringSpan.style.lineHeight = computedStyle.lineHeight;

  measuringSpan.textContent = displayWords.join(" ") + " ";
  document.body.appendChild(measuringSpan);

  const width = measuringSpan.offsetWidth + "px";
  document.body.removeChild(measuringSpan);

  // Tạo đường border cho refText
  const borderDiv = document.createElement("div");
  borderDiv.classList.add("border-overlay");
  borderDiv.style.width = width;
  refText.appendChild(borderDiv);

  // Set width cho refText2 nếu tồn tại
  if (refText2) {
    refText2.style.width = width;
  }
});


</script>


<!-- 2. Thêm thư viện JsBarcode -->
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>

<!-- 3. Sinh barcode bằng JavaScript -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const barcodeValue = "{{vari.barcode}}";
    JsBarcode("#barcode-{{vari.barcode}}", barcodeValue, {
      format: "CODE128",
      lineColor: "#000",
      width: 0.85,
      height: 30,
      displayValue: true,
      fontSize: 13,
      textMargin: 3,
      margin: 0
    });
  });
</script>
{%endfor%}
</div>
</div>
{%endif%}

{% if size == 'a8' %}     
<div id="containerPrint">
<style type="text/css">
body{display: block;margin: 0;color: #000}
.print_div {font-size: 7px;font-family: "Roboto", Arial, sans-serif;;}
p{margin: 0;font-size: 14px;line-height: 16px}
h5{font-size: 9px;margin: 0;}
h2,h3,h4{margin: 0;}
*, *:before, *:after { -moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}}}
p {margin: 0}img {margin: 0}#example_filter{display: none;}#example_info{display: none;}
</style>

{%for vari in vari_list %}
<div class="print_div" id="print-div-se" style="width: 74mm; height: 105mm;border:1px solid #ccc;position: relative;padding: 2px; break-after: page; margin: auto;z-index: 9; overflow: hidden;">
    <div style="padding: 4px;float:right;width: 74mm; height: 105mm;display: flex;flex-wrap: wrap;">
        <div style="display: flex;flex-wrap:wrap;width:72mm;padding-bottom: 2px;border-bottom: 0;border-bottom: 2px dashed #888; margin-bottom: 2px;">
            <div style=" width: 100%; text-align: center;">
                <img src="/static/barcode-product/{{vari.sku}}.png" style="height: 35px; width: 85%; margin-bottom: 2px; border-bottom: 1px solid; border-top: 1px solid"  /> 
            </div>
            <div style=" width: 95%; text-align: center;">
                <p style="font-size:44px;line-height: 45px; margin-bottom: 4px;"><b>{{vari.skugon}}</b></p>
                <p style="line-height: 24px; font-size: 20px;">【{{vari.opt1}}】</p>
            </div>
            <div style=" width: 95%; text-align: center;">
            <p style="font-size:15px; text-transform: uppercase;line-height: 17px; margin-bottom: 5px"><b>{{vari.vn_name}}</b></p>
            </div>
        </div>
        <div style="width:74mm; padding: 10px;">
            
            <p>- Nhập khẩu bởi: Công ty cổ phần TMDV <b>Gia Dụng Plus</b> -MST: 0109514772</p>
            <p style="margin-bottom: 3px">- Địa chỉ: C21-02 KĐT Geleximco, Dương Nội, Hà Đông, Hà Nội</p>
            <p>- NSX: {{vari.nsx_name}} - {{vari.nsx_diachi}}</p>
            <p>- HDSD: Xem chi tiết tài liệu gửi kèm.</p>
            <p style="font-weight: inherit; margin-top: 3px"><i>SẢN XUẤT TẠI TRUNG QUỐC</i></p>
        </div>
        <p style="width: 100%; text-align: center;font-weight: bold;font-family: monospace;">GIADỤNGPLUS+</p>
    </div>
</div>
{%endfor%}


</div>
</div>
{%endif%}

</div></body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

</html>
