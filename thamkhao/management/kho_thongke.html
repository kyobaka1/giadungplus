{% extends "base_kho.html" %}
{% block title %}PROCESS ORDERS - GIA DỤNG PLUS{% endblock %}
{% block menu_thongke %}class="mm-active"{% endblock %}
{% block content %}
{% load humanize %}
<style>
    .shopee-radio-button__label, .shopee-radio-group {
    display: inline-block;
  }
  .shopee-radio-button {
    display: inline-block;
    height: 32px;
    padding: 0 16px;
    font-size: 14px;
    line-height: 32px;
    color: #333;
    text-align: center;
    cursor: pointer;
    background-color: #fff;
    border: 1px solid #e5e5e5;
    -webkit-box-sizing: border-box;
    box-sizing: border-box;
    -webkit-transition: all .2s ease-in-out;
    transition: all .2s ease-in-out;
  }
  .shopee-radio-button {
    margin-right: 8px;
    margin-bottom: 8px;
    height: 24px;
    line-height: 22px;
  }
  .shopee-radio-button.active{
    border-color: #ee4d2d;
    background-color: #fff;
    color: #ee4d2d!important;
    font-weight: bold;
  }
  .shopee-radio-button.active a{
    color: #ee4d2d!important;
  }>
      
  </style>


<div class="row col-lg-9 col-md-12">

   

    <div class="main-card card" style="width: 100%">

    <div class="card-body">
       <div style="width: 100%; display: block;">
            <form method="get" id="myform" >
                <input name="time" type="text" class="btn btn-success" autocomplete="no" data-toggle="datepicker" placeholder="Bắt đầu" readonly>
                    <i class="fa fa-calendar pr-1"></i>
                    <span></span>
                    <i class="fa pl-1 fa-caret-down"></i>
                </input>
                <input name="end_time" type="text" class="btn btn-success" autocomplete="no" data-toggle="datepicker" placeholder="Kết thúc" readonly>
                    <i class="fa fa-calendar pr-1"></i>
                    <span></span>
                    <i class="fa pl-1 fa-caret-down"></i>
                </input>
                <button class="btn btn-success" type="submit">Xem báo cáo</button>
               
            </form>
        </div>
        <div style="width: 100%">

        <label class="shopee-radio-button" size="small"><a href="?time=today" class="shopee-radio-button__input"><span class="shopee-radio-button__label"> Ngày hôm nay </span></a></label>

        <label class="shopee-radio-button" size="small"><a href="?time=yes" class="shopee-radio-button__input"><span class="shopee-radio-button__label"> Ngày hôm qua </span></a></label>

        {% load tz %}
        <div style="width: 100%; ">
            <div class="mb-3 card">
               <div class="card-header-tab card-header">
                  <div class="card-header-title font-size-lg text-capitalize font-weight-normal">
                     <i class="header-icon lnr-charts icon-gradient bg-happy-green"> </i>
                     Kết quả hoạt động kho hàng
                  </div>
                  
               </div>
               <div class="no-gutters row">
                  <div class="col-sm-6 col-md-3 col-xl-3">
                     <div class="card no-shadow rm-border bg-transparent widget-chart text-left">
                        <div class="icon-wrapper rounded-circle">
                           <div class="icon-wrapper-bg opacity-10 bg-warning"></div>
                           <i class="pe-7s-box1 text-dark opacity-8"></i>
                        </div>
                        <div class="widget-chart-content">
                           <div class="widget-subheading">SỐ ĐƠN ĐÃ GÓI</div>
                           <div class="widget-numbers">{{sum.sodonhang | intcomma}}</div>
                           <div class="widget-description opacity-8 text-focus">
                              đơn hàng
                           </div>
                        </div>
                     </div>
                     <div class="divider m-0 d-md-none d-sm-block"></div>
                  </div>
                  <div class="col-sm-6 col-md-5 col-xl-5">
                     <div class="card no-shadow rm-border bg-transparent widget-chart text-left">
                        <div class="icon-wrapper rounded-circle">
                           <div class="icon-wrapper-bg opacity-9 bg-danger"></div>
                           <i class="pe-7s-cart text-white"></i>
                        </div>
                        <div class="widget-chart-content">
                           <div class="widget-subheading">TỔNG DOANH SỐ: </div>
                           <div class="widget-numbers"><span>{{sum.doanhso | intcomma}}</span></div>
                           <div class="widget-description opacity-8 text-focus">
                              việt nam đồng
                           </div>
                        </div>
                     </div>
                     <div class="divider m-0 d-md-none d-sm-block"></div>
                  </div>
                  <div class="col-sm-12 col-md-4 col-xl-4">
                     <div class="card no-shadow rm-border bg-transparent widget-chart text-left">
                        <div class="icon-wrapper rounded-circle">
                           <div class="icon-wrapper-bg opacity-9 bg-success"></div>
                           <i class="pe-7s-gift text-white"></i>
                        </div>
                        <div class="widget-chart-content">
                           <div class="widget-subheading">TỔNG SẢN PHẨM</div>
                           <div class="widget-numbers text-success"><span>{{sum.sosanpham | intcomma}}</span></div>
                           <div class="widget-description text-focus">
                              sản phẩm
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               
            </div>

        </div>
        <div style="display: flex;">
        <div style="width: 50%">
        <div class="col-md-12 col-lg-12 col-xl-12">
           <div class="mb-3 card">
              <div class="card-header-tab card-header-tab-animation card-header">
                 <div class="card-header-title">
                    <i class="header-icon pe-7s-flag icon-gradient bg-love-kiss"> </i>
                    KHO GELEXIMCO - HÀ NỘI
                 </div>
              </div>
              <div class="card-body">
                 <div class="tab-content">
                  <div class="row">
                            <div class="col-md-6 col-xl-6">
                                <div class="card mb-3 widget-content bg-happy-green">
                                <div class="widget-content-wrapper text-white">
                                <div class="widget-content-left">
                                <div class="widget-heading">Cần gói hôm nay</div>
                                <div class="widget-subheading">Số đơn:</div>
                                </div>
                                <div class="widget-content-right">
                                <div class="widget-numbers text-white"><span>{{sum_gele.cangoi_sd | intcomma}}</span></div>
                                </div>
                                </div>
                                </div>
                            </div>

                            <div class="col-md-6 col-xl-6">
                                <div class="card mb-3 widget-content bg-premium-dark">
                                <div class="widget-content-wrapper text-white">
                                
                                <div class="widget-content-right">
                                <div class="widget-numbers text-warning"><span>{{sum_gele.cangoi_ds | intcomma}}</span></div>
                                </div>
                                </div>
                                </div>
                            </div>
                        </div>

                  <div class="mt-3 row">
                           <div class="col-sm-12 col-md-3">
                              <div class="widget-content p-0">
                                 <div class="widget-content-outer">
                                    <div class="widget-content-wrapper">
                                       <div class="widget-content-left">
                                          <div class="widget-numbers text-dark">{{sum_gele.sodonhang| intcomma}} </div>
                                       </div>
                                    </div>
                                    <div class="widget-progress-wrapper mt-1">
                                       
                                       <div class="progress-sub-label">
                                          <div class="sub-label-left font-size-md">TỔNG ĐƠN</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-sm-12 col-md-5">
                              <div class="widget-content p-0">
                                 <div class="widget-content-outer">
                                    <div class="widget-content-wrapper">
                                       <div class="widget-content-left">
                                          <div class="widget-numbers text-dark">{{sum_gele.doanhso| intcomma}} </div>
                                       </div>
                                    </div>
                                    <div class="widget-progress-wrapper mt-1">
                                       
                                       <div class="progress-sub-label">
                                          <div class="sub-label-left font-size-md">TỔNG DOANH SỐ</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-sm-12 col-md-4">
                              <div class="widget-content p-0">
                                 <div class="widget-content-outer">
                                    <div class="widget-content-wrapper">
                                       <div class="widget-content-left">
                                          <div class="widget-numbers text-dark">{{sum_gele.sosanpham| intcomma}} </div>
                                       </div>
                                    </div>
                                    <div class="widget-progress-wrapper mt-1">
                                       
                                       <div class="progress-sub-label">
                                          <div class="sub-label-left font-size-md">TỔNG SẢN PHẨM</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <hr>
                  <div class="row">
                    <div id="xxxchart" style="width: 100%"></div>
                    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
                    <script>
    var options = {
        series: [
            {
                name: "GELE",
                data: {{ data_gele | safe }}
            }
        ],
        chart: {
            height: 200,
            type: 'line',
            dropShadow: {
                enabled: true,
                color: '#000',
                top: 18,
                left: 7,
                blur: 10,
                opacity: 0.2
            },
            zoom: {
                enabled: false
            },
            toolbar: {
                show: false
            }
        },
        colors: ['#77B6EA', '#545454'],
        dataLabels: {
            enabled: true,
        },
        stroke: {
            curve: 'smooth'
        },
        
        grid: {
            borderColor: '#e7e7e7',
            row: {
                colors: ['#f3f3f3', 'transparent'],
                opacity: 0.5
            },
        },
        markers: {
            size: 1
        },
        xaxis: {
            categories: {{ categories | safe }},
            title: {
                text: 'Theo giờ'
            }
        },
        yaxis: {
            title: {
                text: 'Đã gói'
            },
            min: 0,
            // Đặt max là giá trị tùy ý
            // max: 100
        },
        legend: {
            position: 'top',
            horizontalAlign: 'right',
            floating: true,
            offsetY: -25,
            offsetX: -5
        }
    };

    var chart = new ApexCharts(document.querySelector("#xxxchart"), options);
    chart.render();
</script>
              </div></div></div>

              <div class="card-body">
                 <div class="tab-content">
                    <div class="tab-pane fade show active" id="tabs-eg-77">
                       <h6 class="text-muted text-uppercase font-size-md opacity-5 font-weight-normal">
                           BẢNG THỐNG KÊ NGƯỜI GÓI
                        </h6>
                       <div >
                          <div >
                             <ul class="rm-list-borders list-group list-group-flush">
                                {% for key, value in gele.items %}
                                <li class="list-group-item">
                                   <div class="widget-content p-0">
                                      <div class="widget-content-wrapper">
                                         <div class="widget-content-left mr-3">
                                            <img width="42" class="rounded-circle" src="/static/22185873824_536529798.jpg" alt="">
                                         </div>
                                         <div class="widget-content-left">
                                            <div class="widget-heading">
                                               {{key}}
                                            </div>
                                            <div class="widget-subheading">
                                               {{value.total_order | intcomma}} đơn - {{value.total_quantity | intcomma}} sản phẩm
                                            </div>
                                         </div>
                                         
                                         <div class="widget-content-right">
                                            <div class="font-size-xlg text-muted">
                                               <small class="opacity-5 pr-1">
                                               $
                                               </small>
                                               <span style="">{{value.total_money | intcomma}}</span>
                                               <small class="text-danger pl-2">
                                               <i class="fa fa-angle-down"></i>
                                               </small>
                                            </div>
                                         </div>
                                      </div>
                                      <div>
                                        <div class="widget-subheading">
                                            {% for lv_key, lv_value in value.cato.items %}
                                                <span style="padding: 2; margin-bottom: 3px">{{ lv_key }}: {{ lv_value | floatformat:0}}  - </span>
                                            {% endfor %}
                                        </div>
                                      </div>
                                   </div>
                                </li>
                                {%endfor%}
                             </ul>
                             
                          </div>
                       </div>
                       
                 </div>
              </div>
           </div> </div>
        </div>
      </div>
        <div style="width: 50%">
        <div class="col-md-12 col-lg-12 col-xl-12">
           <div class="mb-3 card">
              <div class="card-header-tab card-header-tab-animation card-header">
                 <div class="card-header-title">
                    <i class="header-icon pe-7s-flag icon-gradient bg-love-kiss"> </i>
                    KHO TÔ KÝ - SÀI GÒN
                 </div>
              </div>


              <div class="card-body">
                <div class="row">
                            <div class="col-md-6 col-xl-6">
                                <div class="card mb-3 widget-content bg-happy-green">
                                <div class="widget-content-wrapper text-white">
                                <div class="widget-content-left">
                                <div class="widget-heading">Cần gói</div>
                                <div class="widget-subheading">Số đơn:</div>
                                </div>
                                <div class="widget-content-right">
                                <div class="widget-numbers text-white"><span>{{sum_toky.cangoi_sd | intcomma}}</span></div>
                                </div>
                                </div>
                                </div>
                            </div>

                            <div class="col-md-6 col-xl-6">
                                <div class="card mb-3 widget-content bg-premium-dark">
                                <div class="widget-content-wrapper text-white">
                                
                                <div class="widget-content-right">
                                <div class="widget-numbers text-warning"><span>{{sum_toky.cangoi_ds | intcomma}}</span></div>
                                </div>
                                </div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-3 row">
                           <div class="col-sm-12 col-md-3">
                              <div class="widget-content p-0">
                                 <div class="widget-content-outer">
                                    <div class="widget-content-wrapper">
                                       <div class="widget-content-left">
                                          <div class="widget-numbers text-dark">{{sum_toky.sodonhang| intcomma}} </div>
                                       </div>
                                    </div>
                                    <div class="widget-progress-wrapper mt-1">
                                       <div class="progress-sub-label">
                                          <div class="sub-label-left font-size-md">TỔNG ĐƠN</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-sm-12 col-md-5">
                              <div class="widget-content p-0">
                                 <div class="widget-content-outer">
                                    <div class="widget-content-wrapper">
                                       <div class="widget-content-left">
                                          <div class="widget-numbers text-dark">{{sum_toky.doanhso| intcomma}} </div>
                                       </div>
                                    </div>
                                    <div class="widget-progress-wrapper mt-1">
                                       
                                       <div class="progress-sub-label">
                                          <div class="sub-label-left font-size-md">TỔNG DOANH SỐ</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="col-sm-12 col-md-4">
                              <div class="widget-content p-0">
                                 <div class="widget-content-outer">
                                    <div class="widget-content-wrapper">
                                       <div class="widget-content-left">
                                          <div class="widget-numbers text-dark">{{sum_toky.sosanpham| intcomma}} </div>
                                       </div>
                                    </div>
                                    <div class="widget-progress-wrapper mt-1">
                                       
                                       <div class="progress-sub-label">
                                          <div class="sub-label-left font-size-md">TỔNG SẢN PHẨM</div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <hr>
                 <div class="tab-content">
                  <div class="row">
                    <div id="xxxchart22" style="width: 100%"></div>
                    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
                    <script>
    var options = {
        series: [
            {
                name: "TOKY",
                data: {{ data_toky | safe }}
            }
        ],
        chart: {
            height: 200,
            type: 'line',
            dropShadow: {
                enabled: true,
                color: '#000',
                top: 18,
                left: 7,
                blur: 10,
                opacity: 0.2
            },
            zoom: {
                enabled: false
            },
            toolbar: {
                show: false
            }
        },
        colors: ['#77B6EA', '#545454'],
        dataLabels: {
            enabled: true,
        },
        stroke: {
            curve: 'smooth'
        },
        
        grid: {
            borderColor: '#e7e7e7',
            row: {
                colors: ['#f3f3f3', 'transparent'],
                opacity: 0.5
            },
        },
        markers: {
            size: 1
        },
        xaxis: {
            categories: {{ categories | safe }},
            title: {
                text: 'Theo giờ'
            }
        },
        yaxis: {
            title: {
                text: 'Đã gói'
            },
            min: 0,
            // Đặt max là giá trị tùy ý
            // max: 100
        },
        legend: {
            position: 'top',
            horizontalAlign: 'right',
            floating: true,
            offsetY: -25,
            offsetX: -5
        }
    };

    var chart = new ApexCharts(document.querySelector("#xxxchart22"), options);
    chart.render();
</script>
          </div></div></div>


              <div class="card-body">
                 <div class="tab-content">
                    <div class="tab-pane fade show active" id="tabs-eg-77">
                      
                        
                       <h6 class="text-muted text-uppercase font-size-md opacity-5 font-weight-normal">
                           BẢNG THỐNG KÊ THEO NGƯỜI GÓI
                        </h6>
                       <div >
                          <div >
                             <ul class="rm-list-borders list-group list-group-flush">
                                {% for key, value in toky.items %}
                                <li class="list-group-item">
                                   <div class="widget-content p-0">
                                      <div class="widget-content-wrapper">
                                         <div class="widget-content-left mr-3">
                                            <img width="42" class="rounded-circle" src="/static/22185873824_536529798.jpg" alt="">
                                         </div>
                                         <div class="widget-content-left">
                                            <div class="widget-heading">
                                               {{key}}
                                            </div>
                                            <div class="widget-subheading">
                                               {{value.total_order | intcomma}} đơn - {{value.total_quantity | intcomma}} sản phẩm
                                            </div>
                                            
                                         </div>
                                         <div class="widget-content-right">
                                            <div class="font-size-xlg text-muted">
                                               <small class="opacity-5 pr-1">
                                               $
                                               </small>
                                               <span style="">{{value.total_money | intcomma}}</span>
                                               <small class="text-danger pl-2">
                                               <i class="fa fa-angle-down"></i>
                                               </small>
                                            </div>
                                         </div>
                                      </div>
                                      <div>
                                        <div class="widget-subheading">
                                            {% for lv_key, lv_value in value.cato.items %}
                                                <span style="padding: 2; margin-bottom: 3px">{{ lv_key }}: {{ lv_value | floatformat:0}}  - </span>
                                            {% endfor %}
                                        </div>
                                      </div>
                                   </div>
                                </li>
                                {%endfor%}
                             </ul>
                             
                          </div>
                       </div>
                       <br>
                       
                    </div>
                    
                 </div>
              </div>
           </div>
        </div></div>
        </div>
       
        </div>
    </div>
    </div>
    <script type="text/javascript">
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
            <script type="text/javascript" src="//cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js"></script>
            <script type="text/javascript" src="/static/alljs.js"></script>
    </script>
</div>
<style>
.mobile-select {
    display: none;
    background: #fff;
    position: fixed;
    bottom: 2px;
    left: 0;
    right: 0; 
}  
.mobile-select form{width: 24rem;}
.mobile-select button{height: 40px;width: 100%;}
@media only screen and (max-width: 1250px){
    .mobile-select {
            display: block;
    }
}
    .mass-ship-selected .header{
    padding: 24px 16px;
    font-size: 18px;
    font-weight: 500;
}.mass-ship-selected .main{
    padding: 24px 16px;
}.batch-arrange-pickup .body .button{
    width: 100%;
}
.shopee-button--primary.shopee-button--outline {
    color: #ee4d2d;
    background-color: transparent;
    border-color: #ee4d2d;
}.shopee-button .shopee-icon {
    width: 16px;
    height: 16px;
    vertical-align: middle;
}.shopee-icon {
    display: inline-block;
    line-height: 0;
    fill: #fff;
}.batch-auto-consignment .body .button {
    width: 100%;
}.mass-ship-selected .subtitle{
    padding: 0 16px;
    color: #686868;
}
</style>
</div>
{% endblock %}
{% block privatejs %}
    {%if pickup.print_status > 0 %}
      <script type="text/javascript">
        var myWindow = window.open("https://sisapsan.mysapogo.com/admin/orders/PrintPackingInstructions?locationId=241737&orderId={{pickup.list_order_id}}",'_blank',"width=400,height=800");
      </script>
    {% endif %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdn.datatables.net/1.11.1/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
        $(document).ready( function () {
            new DataTable( '#example', {
                paging: false,
                scrollY:750,
            });
        } );
    </script>
{% endblock %} 
{% block privatecss %}
<style type="text/css">
    .dataTables_length{width: 50%;display: inline-block;}
    .dataTables_filter{width: 50%;display: inline-block;}
    div.dataTables_wrapper div.dataTables_filter input{
        font-size: 1rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        background-color: #fff;
        background-clip: padding-box;
        border: 1px solid #ced4da;
        border-radius: .25rem;
        transition: border-color 0.15s ease-in-out,box-shadow 0.15s ease-in-out;    
    }
    .btn-edit-new{border:none;background-color: #fff;margin:0;padding: 0;color: red;}
    div.dataTables_wrapper div.dataTables_length select{
        display: inline-block;
        padding: .375rem 1.75rem .375rem .75rem;
        font-weight: 400;
        line-height: 1.5;
        color: #495057;
        vertical-align: middle;
        background: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3e%3cpath fill='%23343a40' d='M2 0L0 2h4zm0 5L0 3h4z'/%3e%3c/svg%3e") no-repeat right .75rem center/8px 10px;
        background-color: #fff;
        border: 1px solid #ced4da;
        border-radius: .25rem;
        appearance: none;  
    }
    div.dataTables_wrapper div.dataTables_paginate{
        margin: 2px 0;
        white-space: nowrap;
        justify-content: flex-end;
        display: flex;
        padding-left: 0;
        list-style: none;
        border-radius: .35rem;
    }
    div.dataTables_wrapper .paginate_button{
        color: #6c757d;
        cursor: auto;
        background-color: #fff;
        border-color: #dee2e6;
        border: 1px solid;
        padding: 5px 15px;
        margin-left: 0;
    }
    div.dataTables_wrapper .paginate_button.current {
        z-index: 1;
        color: #fff;
        background-color: #da624a;
        border-color: #da624a;
        padding: 5px 15px;
    }
</style>
{% endblock %} 